(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{24487:function(e,n,t){"use strict";t.d(n,{At:function(){return f},aG:function(){return p},gN:function(){return m}});var r=t(32393),i=t(14007),s=t(49031),o=t(27378);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}function c(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var l=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],h=["children","spacing","separator","className"],x=(0,r.Gp)((function(e,n){var t=e.spacing,i=c(e,l),s=a({mx:t},(0,r.yK)().separator);return o.createElement(r.m$.span,a({ref:n,role:"presentation"},i,{__css:s}))}));i.Ts&&(x.displayName="BreadcrumbSeparator");var f=(0,r.Gp)((function(e,n){var t=e.isCurrentPage,s=e.as,l=e.className,d=e.href,h=c(e,u),x=(0,r.yK)(),f=a({ref:n,as:s,className:(0,i.cx)("chakra-breadcrumb__link",l)},h);return t?o.createElement(r.m$.span,a({"aria-current":"page",__css:x.link},f)):o.createElement(r.m$.a,a({__css:x.link,href:d},f))}));i.Ts&&(f.displayName="BreadcrumbLink");var m=(0,r.Gp)((function(e,n){var t=e.isCurrentPage,l=e.separator,u=e.isLastChild,h=e.spacing,m=e.children,p=e.className,g=c(e,d),j=(0,s.WR)(m).map((function(e){return e.type===f?o.cloneElement(e,{isCurrentPage:t}):e.type===x?o.cloneElement(e,{spacing:h,children:e.props.children||l}):e})),v=a({display:"inline-flex",alignItems:"center"},(0,r.yK)().item),y=(0,i.cx)("chakra-breadcrumb__list-item",p);return o.createElement(r.m$.li,a({ref:n,className:y},g,{__css:v}),j,!u&&o.createElement(x,{spacing:h},l))}));i.Ts&&(m.displayName="BreadcrumbItem");var p=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Breadcrumb",e),l=(0,r.Lr)(e),u=l.children,d=l.spacing,x=void 0===d?"0.5rem":d,f=l.separator,m=void 0===f?"/":f,p=l.className,g=c(l,h),j=(0,s.WR)(u),v=j.length,y=j.map((function(e,n){return o.cloneElement(e,{separator:m,spacing:x,isLastChild:v===n+1})})),b=(0,i.cx)("chakra-breadcrumb",p);return o.createElement(r.m$.nav,a({ref:n,"aria-label":"breadcrumb",className:b,__css:t.container},g),o.createElement(r.Fo,{value:t},o.createElement(r.m$.ol,{className:"chakra-breadcrumb__list"},y)))}));i.Ts&&(p.displayName="Breadcrumb")},40240:function(e,n,t){"use strict";t.d(n,{$R:function(){return j},Td:function(){return b},Th:function(){return v},Tr:function(){return y},hr:function(){return p},iA:function(){return f},p3:function(){return g},xJ:function(){return x}});var r=t(32393),i=t(14007),s=t(27378);function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function a(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var c=["overflow","overflowX","className"],l=["className"],u=["placement"],d=["isNumeric"],h=["isNumeric"],x=(0,r.Gp)((function(e,n){var t,l=e.overflow,u=e.overflowX,d=e.className,h=a(e,c);return s.createElement(r.m$.div,o({ref:n,className:(0,i.cx)("chakra-table__container",d)},h,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=l?l:u)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),f=(0,r.Gp)((function(e,n){var t=(0,r.jC)("Table",e),c=(0,r.Lr)(e),u=c.className,d=a(c,l);return s.createElement(r.Fo,{value:t},s.createElement(r.m$.table,o({role:"table",ref:n,__css:t.table,className:(0,i.cx)("chakra-table",u)},d)))}));i.Ts&&(f.displayName="Table");var m=(0,r.Gp)((function(e,n){var t=e.placement,i=void 0===t?"bottom":t,c=a(e,u),l=(0,r.yK)();return s.createElement(r.m$.caption,o({},c,{ref:n,__css:o({},l.caption,{captionSide:i})}))}));i.Ts&&(m.displayName="TableCaption");var p=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return s.createElement(r.m$.thead,o({},e,{ref:n,__css:t.thead}))})),g=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return s.createElement(r.m$.tbody,o({},e,{ref:n,__css:t.tbody}))})),j=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return s.createElement(r.m$.tfoot,o({},e,{ref:n,__css:t.tfoot}))})),v=(0,r.Gp)((function(e,n){var t=e.isNumeric,i=a(e,d),c=(0,r.yK)();return s.createElement(r.m$.th,o({},i,{ref:n,__css:c.th,"data-is-numeric":t}))})),y=(0,r.Gp)((function(e,n){var t=(0,r.yK)();return s.createElement(r.m$.tr,o({role:"row"},e,{ref:n,__css:t.tr}))})),b=(0,r.Gp)((function(e,n){var t=e.isNumeric,i=a(e,h),c=(0,r.yK)();return s.createElement(r.m$.td,o({role:"gridcell"},i,{ref:n,__css:c.td,"data-is-numeric":t}))}))},30794:function(e,n,t){"use strict";t.d(n,{SD:function(){return f},Sn:function(){return u},Vp:function(){return l}});var r=t(13018),i=t(32393),s=t(14007),o=t(27378);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}var c=["isDisabled","children"],l=(0,i.Gp)((function(e,n){var t=(0,i.jC)("Tag",e),r=(0,i.Lr)(e),s=a({display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%"},t.container);return o.createElement(i.Fo,{value:t},o.createElement(i.m$.span,a({ref:n},r,{__css:s})))}));s.Ts&&(l.displayName="Tag");var u=(0,i.Gp)((function(e,n){var t=(0,i.yK)();return o.createElement(i.m$.span,a({ref:n,isTruncated:!0},e,{__css:t.label}))}));s.Ts&&(u.displayName="TagLabel");var d=(0,i.Gp)((function(e,n){return o.createElement(r.JO,a({ref:n,verticalAlign:"top",marginEnd:"0.5rem"},e))}));s.Ts&&(d.displayName="TagLeftIcon");var h=(0,i.Gp)((function(e,n){return o.createElement(r.JO,a({ref:n,verticalAlign:"top",marginStart:"0.5rem"},e))}));s.Ts&&(h.displayName="TagRightIcon");var x=function(e){return o.createElement(r.JO,a({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),o.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))};s.Ts&&(x.displayName="TagCloseIcon");var f=function(e){var n=e.isDisabled,t=e.children,r=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,c),s=a({display:"flex",alignItems:"center",justifyContent:"center",outline:"0"},(0,i.yK)().closeButton);return o.createElement(i.m$.button,a({"aria-label":"close"},r,{type:"button",disabled:n,__css:s}),t||o.createElement(x,null))};s.Ts&&(f.displayName="TagCloseButton")},75210:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r,i=t(34896),s=t(83125),o=t(24487),a=t(79894),c=t.n(a),l=t(86677),u=t(51471),d=t(60709),h=t(89403),x=t(27378),f=t(5008),m=t(24246),p=function(e){var n=e.subjectRequest,t=e.setEventDetails,r=n.results,s=r?Object.keys(r):[],o=s.map((function(e,n){return(0,m.jsxs)(i.xu,{children:[(0,m.jsxs)(i.kC,{alignItems:"center",height:23,position:"relative",children:[(0,m.jsx)(i.xu,{zIndex:1,children:(0,m.jsx)(f.St,{})}),n===s.length-1?null:(0,m.jsx)(i.xu,{width:"2px",height:"63px",backgroundColor:"gray.700",position:"absolute",top:"16px",left:"6px",zIndex:0}),(0,m.jsx)(i.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",ml:2,children:e})]}),(0,m.jsx)(i.xv,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",ml:6,mb:7,onClick:function(){t({key:e,logs:r[e]})},children:"View Details"})]},e)}));return(0,m.jsxs)(i.xu,{width:"100%",children:[(0,m.jsx)(i.xv,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Activity Timeline"}),o]})},g=t(21084),j=t(60530),v=t(29549),y=t(73452),b=t(30794),_=t(9992),C=t(13018);!function(e){e.COPY="Copy",e.COPIED="Copied"}(r||(r={}));var k=function(e){var n=function(e){var n=(0,g.VP)(e).onCopy,t=(0,x.useState)(!1),i=t[0],s=t[1],o=(0,x.useState)(r.COPY),a=o[0],c=o[1];return{tooltipText:a,highlighted:i,handleMouseDown:function(){c(r.COPIED),n()},handleMouseUp:function(){s(!1)},handleMouseEnter:function(){s(!0)},handleMouseLeave:function(){s(!1)},setTooltipText:c}}(e.copyText),t=n.tooltipText,i=n.highlighted,s=n.handleMouseDown,o=n.handleMouseUp,a=n.handleMouseEnter,c=n.handleMouseLeave,l=n.setTooltipText,u=i?"complimentary.500":"gray.600";return(0,m.jsx)(_.u,{label:t,placement:"top",closeDelay:500,onOpen:function(){l(r.COPY)},onClose:function(){l(r.COPY)},children:(0,m.jsx)(C.JO,{cursor:"pointer",width:18,height:18,viewBox:"0 0 18 18",color:u,onClick:s,onMouseUp:o,onMouseEnter:a,onMouseLeave:c,children:(0,m.jsx)("path",{fill:"currentColor",d:"M15 3.75V0H10.625C9.58945 0 8.75 0.839453 8.75 1.875V13.125C8.75 14.1605 9.58945 15 10.625 15H18.125C19.1605 15 20 14.1605 20 13.125V5H16.2852C15.5625 5 15 4.4375 15 3.75ZM16.25 0V3.75H20L16.25 0ZM7.5 13.75V5H1.875C0.839453 5 0 5.83945 0 6.875V18.125C0 19.1605 0.839453 20 1.875 20H9.375C10.4105 20 11.25 19.1605 11.25 18.125V16.25H10C8.62109 16.25 7.5 15.1289 7.5 13.75Z"})})})},S=function(e){var n=e.errorMessage;return(0,m.jsxs)(i.xu,{height:"100%",id:"outer",children:[(0,m.jsxs)(i.kC,{alignItems:"center",paddingBottom:"8px",children:[(0,m.jsx)(i.xv,{size:"sm",color:"gray.700",fontWeight:"medium",marginRight:"8px",lineHeight:"20px",children:"Status"}),(0,m.jsx)(b.Vp,{size:"sm",height:"20px",backgroundColor:"red.500",color:"white",marginRight:"8px",children:"Error"}),(0,m.jsx)(i.xu,{padding:"0px",marginBottom:"3px",children:(0,m.jsx)(k,{copyText:n})})]}),(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xu,{id:"errorWrapper",overflow:"auto",height:"100%",children:(0,m.jsx)(i.xv,{children:n})})]})},w=t(40240),O=t(1326),z=t(9481),T=function(e){var n=e.eventLogs,t=e.openErrorPanel,r=null===n||void 0===n?void 0:n.map((function(e){return(0,m.jsxs)(w.Tr,{_hover:{backgroundColor:e.status===z.n.ERROR?"#F7FAFC":"unset"},onClick:function(){e.status===z.n.ERROR&&t(e.message)},style:{cursor:e.status===z.n.ERROR?"pointer":"unset"},children:[(0,m.jsx)(w.Td,{children:(0,m.jsx)(i.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:(0,O.p6)(e.updated_at)})}),(0,m.jsx)(w.Td,{children:(0,m.jsx)(i.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.status})}),(0,m.jsx)(w.Td,{children:(0,m.jsx)(i.xv,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.collection_name})})]},e.updated_at)}));return(0,m.jsx)(i.xu,{width:"100%",paddingTop:"0px",height:"100%",children:(0,m.jsx)(w.xJ,{id:"tableContainer",height:"100%",style:{overflowY:"auto"},children:(0,m.jsxs)(w.iA,{size:"sm",id:"table",position:"relative",children:[(0,m.jsx)(w.hr,{id:"tableHeader",position:"sticky",top:"0px",backgroundColor:"white",children:(0,m.jsxs)(w.Tr,{children:[(0,m.jsx)(w.Th,{children:(0,m.jsx)(i.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Time"})}),(0,m.jsx)(w.Th,{children:(0,m.jsx)(i.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Status"})}),(0,m.jsx)(w.Th,{children:(0,m.jsx)(i.xv,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Collection"})})]})}),(0,m.jsx)(w.p3,{id:"tabelBody",children:r})]})})})},E=function(e){var n=e.eventData,t=(0,g.qY)(),r=t.isOpen,s=t.onOpen,o=t.onClose,a=(0,x.useState)(!1),c=a[0],l=a[1],u=(0,x.useState)(""),d=u[0],h=u[1],p=function(){l(!1)},b=function(){c&&p(),o()},_=c?"Event detail":"Event log";return void 0===n?null:(0,m.jsxs)(i.xu,{width:"100%",paddingTop:"0px",height:"100%",children:[(0,m.jsx)(i.xv,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Event Details"}),(0,m.jsx)(i.xv,{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",mb:1,children:n.key}),(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xv,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",onClick:function(){s()},children:"View Log"}),(0,m.jsxs)(j.dy,{isOpen:r,placement:"right",onClose:b,size:"full",autoFocus:!1,children:[(0,m.jsx)(j.P1,{}),(0,m.jsxs)(j.sc,{style:{width:"50%"},children:[(0,m.jsx)(j.OX,{style:{paddingBottom:"0px"},children:(0,m.jsxs)(i.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:[(0,m.jsxs)(i.kC,{alignItems:"center",children:[c?(0,m.jsx)(v.hU,{icon:(0,m.jsx)(y.Rp,{}),"aria-label":"Close error logs",size:"sm",style:{height:"24px",width:"24px",minWidth:"24px",marginRight:"8px"},onClick:p}):null,(0,m.jsx)(i.xv,{color:"gray.900",fontSize:"md",lineHeight:"6",fontWeight:"medium",children:_})]}),(0,m.jsx)(i.kC,{alignItems:"flex-start",height:"100%",children:(0,m.jsx)(v.hU,{icon:(0,m.jsx)(f.LG,{width:"17px"}),"aria-label":"Stop viewing error message",variant:"unstyled",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},isRound:!0,onClick:b})})]})}),(0,m.jsxs)(j.Ng,{id:"drawerBody",overflow:"hidden",children:[n&&!c?(0,m.jsx)(T,{eventLogs:n.logs,openErrorPanel:function(e){h(e),l(!0)}}):null,c?(0,m.jsx)(S,{errorMessage:d}):null]})]})]})]})},P=function(e){var n=e.subjectRequest,t=(0,x.useState)(),r=t[0],s=t[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Events and logs"}),(0,m.jsx)(i.iz,{}),(0,m.jsxs)(i.kC,{mt:3,children:[(0,m.jsx)(p,{subjectRequest:n,setEventDetails:s}),(0,m.jsx)(E,{eventData:r})]})]})},R=t(90849),N=t(55732),W=t(97865),I=t(34707),q=t.n(I),D=t(9408),M=t(57928),A=t(51365),Z=t(10141),$=t(6848),L=t(92975),G=t(32751),H=t(71292),V=t(68301);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,R.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var K=function(e){var n=e.connectorName,t=e.data,r=e.isSubmitting,s=void 0!==r&&r,o=e.onSaveClick,a=(0,g.qY)(),c=a.isOpen,l=a.onOpen,u=a.onClose,d=(0,x.useRef)(null),h=function(){var e=(0,N.Z)(q().mark((function e(n,r){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={connection_key:t.connection_key,privacy_request_id:t.privacy_request_id,body:F({},n)},o(i),u();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(null===t||void 0===t?void 0:t.checked)&&(0,m.jsx)(v.zx,{color:"gray.700",fontSize:"xs",h:"24px",onClick:l,variant:"outline",w:"58px",children:"Review"}),!(null!==t&&void 0!==t&&t.checked)&&(0,m.jsx)(v.zx,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",onClick:l,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Begin manual input"}),(0,m.jsx)(H.J9,{enableReinitialize:!0,initialValues:F({},t.fields),onSubmit:h,validateOnBlur:!1,validateOnChange:!1,validationSchema:V.Ry().shape({}),children:function(e){return(0,m.jsxs)(j.dy,{isOpen:c,placement:"right",initialFocusRef:d,onClose:u,size:"lg",children:[(0,m.jsx)(j.P1,{}),(0,m.jsxs)(j.sc,{children:[(0,m.jsx)(j.cC,{}),(0,m.jsxs)(j.OX,{color:"gray.900",children:[(0,m.jsx)(i.xv,{fontSize:"xl",mb:4,children:n}),(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xv,{fontSize:"md",mt:"8",children:"PII Requirements"}),(0,m.jsx)(i.xu,{mt:"8px",children:(0,m.jsx)(i.xv,{color:"gray.700",fontSize:"sm",fontWeight:"normal",children:"Please complete the following PII fields that have been collected for the selected subject."})})]}),(0,m.jsx)(j.Ng,{mt:"24px",children:(0,m.jsx)(H.l0,{id:"manual-detail-form",noValidate:!0,children:(0,m.jsx)(i.gC,{align:"stretch",gap:"16px",children:Object.entries(t.fields).map((function(e,n){var t=(0,W.Z)(e,1)[0];return(0,m.jsx)(i.Ug,{children:(0,m.jsx)(H.gN,{id:t,name:t,children:function(e){var r=e.field;return(0,m.jsxs)(L.NI,{alignItems:"baseline",display:"inline-flex",children:[(0,m.jsx)(L.lX,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:t,w:"50%",children:t}),(0,m.jsx)(G.II,F(F({},r),{},{autoComplete:"off",color:"gray.700",placeholder:"Please enter ".concat(t),ref:0===n?d:void 0,size:"sm"}))]})}})},t)}))})})}),(0,m.jsx)(j.ze,{justifyContent:"flex-start",children:(0,m.jsxs)(v.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,m.jsx)(v.zx,{onClick:u,variant:"outline",children:"Cancel"}),(0,m.jsx)(v.zx,{bg:"primary.800",color:"white",form:"manual-detail-form",isLoading:s,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Save"})]})})]})]})}})]})};function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach((function(n){(0,R.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J=function(e){var n=e.subjectRequest,t=(0,$.T)(),r=(0,l.useRouter)(),o=(0,D.VY)(),a=o.errorAlert,c=o.successAlert,u=(0,D.HK)().handleError,d=(0,x.useState)([]),h=d[0],f=d[1],p=(0,x.useState)(!1),g=p[0],j=p[1],y=(0,x.useState)(!1),b=y[0],_=y[1],C=(0,M.W6)(),k=C.data,S=C.isFetching,O=C.isLoading,z=C.isSuccess,T=(0,A.w3)(),E=(0,W.Z)(T,1)[0],P=(0,A.hY)(),R=(0,W.Z)(P,1)[0],I=function(){var e=(0,N.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,E(n.id).unwrap();case 4:c("Manual request has been received. Request now processing."),r.push(Z.gp),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(e.t0);case 11:return e.prev=11,j(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,N.Z)(q().mark((function e(n){var t,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,R(n).unwrap();case 4:t={connection_key:n.connection_key,fields:{}},Object.entries(n.body).forEach((function(e){var n=(0,W.Z)(e,2),r=n[0],i=n[1];t.fields[r]=i||""})),r=h.map((function(e){return e.connection_key===t.connection_key?Y(Y({},e),{},{checked:!0,fields:Y({},t.fields)}):e})),f(r),c("Manual input successfully saved!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),u(e.t0);case 14:return e.prev=14,_(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){return z&&k.length>0&&0===h.length&&function(){if(!(h.length>0)){var e=[],r=null===k||void 0===k?void 0:k.map((function(e){return e.connection_config.key}));null===r||void 0===r||r.every((function(r){return e.push(t(A.$I.endpoints.getUploadedManualWebhookData.initiate({connection_key:r,privacy_request_id:n.id})))})),Promise.allSettled(e).then((function(e){var n=[];e.forEach((function(e,t){if("fulfilled"===e.status&&e.value.isSuccess&&e.value.data){var r={checked:e.value.data.checked,fields:{},connection_key:e.value.originalArgs.connection_key,privacy_request_id:e.value.originalArgs.privacy_request_id};Object.entries(e.value.data.fields).forEach((function(e){var n=(0,W.Z)(e,2),t=n[0],i=n[1];r.fields[t]=i||""})),n.push(r)}else a("An error occurred while loading manual input data for ".concat(k[t].connection_config.name))})),f(n)}))}}(),function(){}}),[k,h.length,t,a,z,n.id]),(0,m.jsxs)(i.gC,{align:"stretch",spacing:8,children:[(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Manual Processing"}),(0,m.jsx)(i.iz,{})]}),(0,m.jsx)(i.xu,{children:(0,m.jsx)(i.xv,{color:"gray.700",fontSize:"sm",children:"The following table details the integrations that require manual input from you."})}),(0,m.jsxs)(i.xu,{children:[(S||O)&&(0,m.jsx)(i.M5,{children:(0,m.jsx)(s.$,{})}),z&&k?(0,m.jsx)(w.xJ,{children:(0,m.jsxs)(w.iA,{size:"sm",variant:"unstyled",children:[(0,m.jsx)(w.hr,{children:(0,m.jsxs)(w.Tr,{children:[(0,m.jsx)(w.Th,{fontSize:"sm",fontWeight:"semibold",pl:"0",textTransform:"none",children:"Connector name"}),(0,m.jsx)(w.Th,{fontSize:"sm",fontWeight:"semibold",textTransform:"none",children:"Description"}),(0,m.jsx)(w.Th,{})]})}),(0,m.jsxs)(w.p3,{children:[k.length>0&&k.map((function(e){return(0,m.jsxs)(w.Tr,{children:[(0,m.jsx)(w.Td,{pl:"0",children:e.connection_config.name}),(0,m.jsx)(w.Td,{children:e.connection_config.description}),(0,m.jsx)(w.Td,{children:h.length>0?(0,m.jsx)(K,{connectorName:e.connection_config.name,data:h.find((function(n){return n.connection_key===e.connection_config.key})),isSubmitting:b,onSaveClick:L}):null})]},e.id)})),0===k.length&&(0,m.jsx)(w.Tr,{children:(0,m.jsx)(w.Td,{colSpan:3,pl:"0",children:(0,m.jsx)(i.M5,{children:(0,m.jsx)(i.xv,{children:"You don\u2018t have any Manual Process connections set up yet."})})})})]}),h.length>0&&h.every((function(e){return e.checked}))?(0,m.jsx)(w.$R,{children:(0,m.jsxs)(w.Tr,{children:[(0,m.jsx)(w.Th,{}),(0,m.jsx)(w.Th,{}),(0,m.jsx)(w.Th,{children:(0,m.jsx)(v.zx,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",isLoading:g,loadingText:"Completing DSR",onClick:I,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Complete DSR"})})]})}):null]})}):null]})]})},U=t(64860),Q=t(19099),ee=t(1540),ne=t(40377),te=t(20970),re=t(30199),ie=function(e){var n=e.subjectRequest,t=n.id,r=n.status,s=n.policy;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Request details"}),(0,m.jsx)(i.iz,{}),(0,m.jsxs)(i.kC,{alignItems:"center",children:[(0,m.jsx)(i.xv,{mt:4,mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request ID:"}),(0,m.jsx)(i.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:1,children:t}),(0,m.jsx)(k,{copyText:t})]}),(0,m.jsxs)(i.kC,{alignItems:"center",children:[(0,m.jsx)(i.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request Type:"}),(0,m.jsx)(i.xu,{mr:1,mb:4,children:(0,m.jsx)(ee.Z,{rules:s.rules})})]}),(0,m.jsxs)(i.kC,{children:[(0,m.jsx)(i.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Policy key:"}),(0,m.jsx)(i.xu,{children:(0,m.jsx)(b.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:n.policy.key})})]}),(0,m.jsxs)(i.kC,{alignItems:"flex-start",children:[(0,m.jsx)(i.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Status:"}),(0,m.jsxs)(i.Ug,{spacing:"16px",children:[(0,m.jsx)(Q.Z,{status:r}),(0,m.jsxs)(v.hE,{isAttached:!0,variant:"outline",borderRadius:"md",children:["error"===r&&(0,m.jsx)(re.Z,{buttonProps:{size:"xs"},subjectRequest:n}),"pending"===r&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ne.Z,{subjectRequest:n,children:"Approve"}),(0,m.jsx)(te.Z,{subjectRequest:n,children:"Deny"})]})]}),(0,m.jsx)(U.Z,{daysLeft:n.days_left,includeText:!0,status:n.status})]})]})]})},se=t(13807),oe=t(95946),ae=function(e){var n=e.subjectRequest.identity,t=(0,x.useState)(!1),r=t[0],s=t[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(i.kC,{direction:"row",justifyContent:"space-between",children:[(0,m.jsx)(i.X6,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Subject identities"}),(0,m.jsxs)(i.kC,{flexShrink:0,alignItems:"flex-start",children:[(0,m.jsx)(oe.Z,{revealPII:r,onChange:s}),(0,m.jsx)(i.xv,{fontSize:"xs",ml:2,size:"sm",color:"gray.600",fontWeight:"500",children:"Reveal PII"})]})]}),(0,m.jsx)(i.iz,{}),(0,m.jsxs)(i.kC,{alignItems:"center",children:[(0,m.jsx)(i.xv,{mt:4,mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Email:"}),(0,m.jsx)(i.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",children:(0,m.jsx)(se.Z,{data:n.email?n.email:"",revealPII:r})})]}),(0,m.jsxs)(i.kC,{alignItems:"flex-start",children:[(0,m.jsx)(i.xv,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Mobile:"}),(0,m.jsx)(i.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",children:(0,m.jsx)(se.Z,{data:n.phone_number?n.phone_number:"",revealPII:r})})]})]})},ce=function(e){var n=e.data;return(0,m.jsxs)(i.gC,{align:"stretch",display:"flex-start",spacing:6,children:[(0,m.jsx)(i.xu,{"data-testid":"privacy-request-details",children:(0,m.jsx)(ie,{subjectRequest:n})}),(0,m.jsx)(i.xu,{children:(0,m.jsx)(ae,{subjectRequest:n})}),"requires_input"===n.status&&(0,m.jsx)(i.xu,{children:(0,m.jsx)(J,{subjectRequest:n})}),(0,m.jsx)(i.xu,{children:(0,m.jsx)(P,{subjectRequest:n})})]})},le=function(){var e,n=(0,l.useRouter)().query.id,t=void 0===n?"":n,r=(0,h.QA)({id:Array.isArray(t)?t[0]:t,verbose:!0},{skip:""===t}),a=r.data,x=r.isLoading;return e=r.isUninitialized||x?(0,m.jsx)(i.M5,{children:(0,m.jsx)(s.$,{})}):a&&0!==(null===a||void 0===a?void 0:a.items.length)?(0,m.jsx)(ce,{data:null===a||void 0===a?void 0:a.items[0]}):(0,m.jsx)(i.xv,{children:"404 no privacy request found"}),(0,m.jsxs)(u.Z,{title:"Privacy Requests - ".concat(t),children:[(0,m.jsxs)(i.X6,{fontSize:"2xl",fontWeight:"semibold",children:["Privacy Request",(0,m.jsx)(i.xu,{mt:2,mb:9,children:(0,m.jsxs)(o.aG,{fontWeight:"medium",fontSize:"sm",children:[(0,m.jsx)(o.gN,{children:(0,m.jsx)(o.At,{as:c(),href:d.Jw,children:"Privacy Requests"})}),(0,m.jsx)(o.gN,{children:(0,m.jsx)(o.At,{isCurrentPage:!0,color:"complimentary.500",_hover:{textDecoration:"none"},children:"View Details"})})]})})]}),e]})}},6554:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/[id]",function(){return t(75210)}])}},function(e){e.O(0,[2141,5527,8301,9,2153,9774,2888,179],(function(){return n=6554,e(e.s=n);var n}));var n=e.O();_N_E=n}]);