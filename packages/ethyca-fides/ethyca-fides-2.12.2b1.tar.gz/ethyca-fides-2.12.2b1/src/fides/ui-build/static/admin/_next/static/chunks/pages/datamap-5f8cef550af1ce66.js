(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{55447:function(e,t,n){"use strict";var r=n(90849),i=n(60530),o=n(34896),s=n(29549),a=n(24246);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm,l=e.title,u=e.message,d=e.cancelButtonText,p=e.cancelButtonThemingProps,f=e.continueButtonText,h=e.continueButtonThemingProps,x=e.isLoading,m=e.returnFocusOnClose,g=e.isCentered,b=e.testId,j=void 0===b?"confirmation-modal":b,v=e.icon;return(0,a.jsxs)(i.u_,{isOpen:t,onClose:n,size:"lg",returnFocusOnClose:null===m||void 0===m||m,isCentered:g,children:[(0,a.jsx)(i.ZA,{}),(0,a.jsxs)(i.hz,{textAlign:"center",p:6,"data-testid":j,children:[v?(0,a.jsx)(o.M5,{mb:2,children:v}):null,l?(0,a.jsx)(i.xB,{fontWeight:"medium",pb:0,children:l}):null,u?(0,a.jsx)(i.fe,{children:u}):null,(0,a.jsx)(i.mz,{children:(0,a.jsxs)(o.MI,{columns:2,width:"100%",children:[(0,a.jsx)(s.zx,c(c({variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",isDisabled:x},p),{},{children:d||"Cancel"})),(0,a.jsx)(s.zx,c(c({colorScheme:"primary",onClick:r,"data-testid":"continue-btn",isLoading:x},h),{},{children:f||"Continue"}))]})})]})]})}},96156:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(13018),i=n(24246),o=(0,r.IU)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,i.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})})},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var r=n(90849),i=n(34896),o=n(24246);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},c=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(l,{message:e});return a(a({},u),{description:t})},p=function(e){var t=(0,o.jsx)(c,{message:e});return a(a({},u),{description:t,status:"error"})}},66521:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(27378),i=n(24246),o=(0,r.createRef)(),s=(0,r.createContext)(o);t.Z=function(e){var t=e.children;return(0,i.jsx)(s.Provider,{value:o,children:t})}},76459:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(43350),i=n(80040),o=n(90849),s=n(27378),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=t,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),l=s.createContext(new a);t.Z=l},85249:function(e,t,n){"use strict";var r=n(34896),i=n(27378),o=n(60378),s=n(44845),a=n(24246);t.Z=function(e){var t=e.globalFilter,n=e.setGlobalFilter,l=e.placeholder,c=(0,i.useState)(t),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,a.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,a.jsx)(s.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),n(void 0)},search:u||"",placeholder:l})})}},24502:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return yt}});var r=n(27378),i=n(34896),o=n(88038),s=n.n(o),a=n(35100),l=n(64989),c=n(48114),u=n(24246),d=function(e){var t=e.children,n=e.title;return(0,u.jsxs)(i.kC,{"data-testid":n,direction:"column",height:"100vh",children:[(0,u.jsxs)(s(),{children:[(0,u.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,u.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,u.jsx)(a.Z,{}),(0,u.jsx)(c.Z,{}),(0,u.jsxs)(i.kC,{as:"main",overflow:"auto",flexGrow:1,paddingTop:10,paddingLeft:10,gap:10,children:[(0,u.jsx)(i.xu,{flex:0,flexShrink:0,children:(0,u.jsx)(l.U,{})}),(0,u.jsx)(i.kC,{direction:"column",flex:1,minWidth:0,children:t})]})]})},p=n(88486),f=n(83125),h=n(65218),x=n.n(h),m=n(6848),g=n(90849),b=n(55732),j=n(97865),v=n(90089),y=n(34707),O=n.n(y),w=n(70409),C=n(21295),S=n(29549),k=n(73452),P=n(89348),D=n(78624),E=n(24753),Z=n(21084),z=n(5008),_=n(71292),I=n(68301),M=n(55447),V=n(43139),T=n(47134),F=n(75846),W=n(75523),R=["onSubmit","initialValues","onDelete"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){return A(A({},e),{},{id:e.name?"".concat(e.data_use," - ").concat(e.name):e.data_use})},B=function(e){return e.map(L)},G=I.Ry().shape({data_categories:I.IX(I.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:I.Z_().required().label("Data use"),data_subjects:I.IX(I.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),U={data_categories:[],data_subjects:[],data_use:"",name:""},q=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,o=e.onDelete,s=e.isEditing,a=(0,_.u6)(),l=a.dirty,c=a.isSubmitting,d=a.isValid,p=a.initialValues,f=(0,Z.qY)(),h=function(){var e=(0,b.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(L(p));case 2:f.onClose();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=""===p.data_use;return(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(V.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:s}),(0,u.jsx)(V.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",disabled:s,tooltip:"The personal data processing activity or activities associated with this data use."}),(0,u.jsx)(V.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked"}),(0,u.jsx)(V.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked"}),(0,u.jsxs)(S.hE,{size:"sm",paddingTop:2,display:"flex",justifyContent:"space-between",children:[(0,u.jsx)(S.zx,{variant:"outline",onClick:f.onOpen,disabled:x,"data-testid":"delete-btn",children:"Delete"}),(0,u.jsx)(S.zx,{type:"submit",colorScheme:"primary",disabled:!l||!d,isLoading:c,"data-testid":"save-btn",children:"Save"})]}),(0,u.jsx)(M.Z,{onConfirm:h,title:"Delete data use",message:"Are you sure you want to delete this data use? This action can't be undone.",isOpen:f.isOpen,onClose:f.onClose})]})},X=function(e){var t=e.onSubmit,n=e.initialValues,o=e.allDataUses,s=null!==n&&void 0!==n?n:U,a=(0,r.useState)(!1),l=a[0],c=a[1],d=(0,r.useMemo)((function(){var e=o.filter((function(e){return e.fides_key===s.data_use}))[0];if(e)return s.name?"".concat(e.name," - ").concat(s.name):e.name}),[o,s]),p=function(){var e=(0,b.Z)(O().mark((function e(n,r){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(L(n),r);case 2:e.sent&&(r.resetForm({values:n}),c(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:p,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,u.jsxs)(i.xu,A(A({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[d?(0,u.jsx)(i.X6,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:d}):null,!r&&l&&!t&&s.data_use?(0,u.jsxs)(i.xv,{flexShrink:0,fontSize:"sm","data-testid":"saved-indicator",children:[(0,u.jsx)(z.St,{})," Saved"]}):null,t&&r?(0,u.jsxs)(i.xv,{flexShrink:0,fontSize:"sm","data-testid":"saved-indicator",children:[(0,u.jsx)(z.f9,{})," Unsaved Changes"]}):null]}))},initialValues:s}},K=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,o=(0,v.Z)(e,R),s=X({onSubmit:t,initialValues:n,allDataUses:o.allDataUses}),a=s.handleSubmit,l=s.renderHeader,c=s.initialValues;return(0,u.jsx)(_.J9,{enableReinitialize:!0,initialValues:c,onSubmit:a,validationSchema:G,children:function(e){var t=e.dirty;return(0,u.jsxs)(_.l0,{children:[(0,u.jsx)(p.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xu,{paddingTop:4,"data-testid":"header",children:l({dirty:t})}),(0,u.jsx)(q,A({onDelete:r},o))]})]})}})},N=n(73679),Y=n(9992),Q=n(62332),$=["privacyDeclaration","onEdit","onDelete"],J=["privacyDeclarations"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,o=(0,v.Z)(e,$),s=X(te({initialValues:t,onSubmit:function(e){return n(t,e)}},o)),a=s.initialValues,l=s.renderHeader,c=s.handleSubmit;return(0,u.jsx)(Q.Qd,{children:function(e){var n=e.isExpanded;return(0,u.jsx)(_.J9,{enableReinitialize:!0,initialValues:a,onSubmit:c,validationSchema:G,children:function(e){var s=e.dirty;return(0,u.jsxs)(_.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,u.jsx)(p.Gt,{id:"".concat(t.data_use,"-form"),name:t.data_use}),(0,u.jsxs)(Q.KF,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[l({dirty:s,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,u.jsx)(Q.XE,{})]}),(0,u.jsx)(Q.Hk,{backgroundColor:"gray.50",pt:0,children:(0,u.jsx)(i.Kq,{spacing:4,children:(0,u.jsx)(q,te({isEditing:!0,onDelete:r},o))})})]})}})}})},re=function(e){var t=e.privacyDeclarations,n=(0,v.Z)(e,J);return(0,u.jsx)(Q.UQ,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,u.jsx)(ne,te({privacyDeclaration:e},n),e.id)}))})},ie=["id"],oe=["system","onCollision","onSave"];function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e){e.id;var t,n=(0,v.Z)(e,ie);return ae(ae({},n),{},{name:null!==(t=n.name)&&void 0!==t?t:""})},ce=function(e){var t=e.system,n=e.onCollision,o=e.onSave,s=(0,v.Z)(e,oe),a=(0,w.pm)(),l=(0,r.useState)(!1),c=l[0],d=l[1],p=(0,r.useState)(void 0),f=p[0],h=p[1],x=(0,r.useMemo)((function(){var e=B(t.privacy_declarations);return f?e.filter((function(e){return e.id!==f.id})):e}),[f,t]),m=function(e){return x.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(n(),!0)},g=function(){var e=(0,b.Z)(O().mark((function e(t,n){var r,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map((function(e){return le(e)})),e.next=3,o(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,b.Z)(O().mark((function e(t,n){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id===t.id||!m(n)){e.next=2;break}return e.abrupt("return",!1);case 2:return r=x.map((function(e){return e.id===t.id?n:e})),e.abrupt("return",g(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,b.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m(t)){e.next=2;break}return e.abrupt("return",!1);case 2:return a.closeAll(),h(t),n=[].concat((0,N.Z)(x),[t]),e.abrupt("return",g(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,b.Z)(O().mark((function e(n){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=B(t.privacy_declarations).filter((function(e){return e.id!==n.id})),e.abrupt("return",g(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,b.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return(n=e.sent)&&(d(!1),h(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){d(!1)}),[t.fides_key]);var P=t.privacy_declarations.length>0||0===t.privacy_declarations.length&&!c;return(0,u.jsxs)(i.Kq,{spacing:0,mb:4,children:[(0,u.jsx)(re,ae({privacyDeclarations:x,onEdit:j,onDelete:C},s)),c?(0,u.jsx)(i.xu,{backgroundColor:"gray.50",padding:4,paddingTop:0,"data-testid":"new-declaration-form",children:(0,u.jsx)(K,ae({initialValues:f,onSubmit:y,onDelete:k},s))}):null,P?(0,u.jsx)(i.xu,{backgroundColor:"gray.50",m:0,p:4,"data-testid":"new-declaration-button",children:(0,u.jsx)(Y.u,{label:"Add a Data Use",hasArrow:!0,placement:"top",isDisabled:0===x.length,children:(0,u.jsx)(S.zx,{colorScheme:"primary",size:"xs","data-testid":"add-btn",onClick:function(){d(!0),h(void 0)},disabled:c&&!f,children:"Add a Data Use +"})})}):null]})},ue=n(51860),de=n(9198),pe=n(60041);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe={name:"",description:""},me=function(e){var t,n=e.system,r="/systems/configure/".concat(n.fides_key),o=function(e){var t=(0,ue.dB)(),n=(0,j.Z)(t,1)[0],r=(0,w.pm)(),i=function(){var t=(0,b.Z)(O().mark((function t(i,o){var s,a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[he(he({},e),{},{name:i.name,description:i.description})],t.next=3,n(s);case 3:a=t.sent,(0,pe.D4)(a)?r((0,E.Vo)((0,D.e$)(a.error))):(r((0,E.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:I.Ry().shape({name:I.Z_().required().label("Name"),description:I.Z_().required().label("Description")})}}(n),s=o.handleUpsertSystem,a=o.validationSchema;return(0,u.jsxs)(i.xu,{children:[(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xv,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,u.jsx)(i.LZ,{}),(0,u.jsxs)(de._p,{color:"complimentary.500",href:r,children:["View more",(0,u.jsx)(k.h0,{ml:2})]})]}),(0,u.jsx)(i.xu,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(_.J9,{enableReinitialize:!0,initialValues:null!==(t=n)&&void 0!==t?t:xe,validationSchema:a,onSubmit:s,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,u.jsxs)(_.l0,{children:[(0,u.jsx)(p.Gt,{id:"SystemInfo",name:"System Info"}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(V.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(V.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,u.jsx)(i.kC,{marginTop:6,justifyContent:"flex-end",children:(0,u.jsx)(S.zx,{textAlign:"right",type:"submit",disabled:!n||!r,colorScheme:"primary",isLoading:t,size:"sm",children:"Save"})})]})}})})]})},ge=["isLoading"];function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t,n=e.selectedSystemId,o=e.resetSelectedSystemId,s=(0,r.useMemo)((function(){return Boolean(n)}),[n]),a=function(){var e=(0,W.MO)().isLoading,t=(0,T.te)().isLoading,n=(0,F.fd)().isLoading;return{allDataCategories:(0,m.C)(W.qb),allDataSubjects:(0,m.C)(T.ZL),allDataUses:(0,m.C)(F.U3),isLoading:e||t||n}}(),l=(a.isLoading,(0,v.Z)(a,ge)),c=(0,w.pm)(),d=(0,ue.qQ)(),p=(0,j.Z)(d,1)[0],f=(0,ue.rn)(n,{skip:!n}).data,h=function(){var e=(0,b.Z)(O().mark((function e(t,n){var r,i,o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je(je({},f),{},{privacy_declarations:t}),i=function(e){if((0,D.D4)(e)){var t=(0,D.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");return c((0,E.Vo)(t)),!1}return c.closeAll(),c((0,E.t5)(n?"Data use deleted":"Data use saved")),!0},e.next=4,p(r);case 4:return o=e.sent,e.abrupt("return",i(o));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,u.jsx)(i.xu,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,u.jsx)(C.Mi,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:s,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,u.jsxs)(i.xu,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:n?"unset":"none",backgroundColor:"white",children:[(0,u.jsx)(i.xu,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,u.jsx)(i.xv,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(t=null===f||void 0===f?void 0:f.name)&&void 0!==t?t:"System Information"})}),(0,u.jsx)(i.LZ,{}),(0,u.jsx)(i.kC,{alignItems:"center",children:(0,u.jsx)(S.hU,{icon:(0,u.jsx)(k.Tw,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:o})})]})}),(0,u.jsx)(i.xu,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(me,{system:f}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,u.jsx)(i.xu,{borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(ce,je({system:f,onCollision:function(){c((0,E.Vo)("A declaration already exists with that data use in this system. Please supply a different data use."))},onSave:h},l))}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,u.jsx)(P.q,{system:f})]}):null})]})})})},ye=n(66521),Oe=n(60378),we=n(63138),Ce=n(14221),Se=function(e){var t=e.column,n=e.value,o=function(){var e=r.useState(!1),t=(0,j.Z)(e,2),n=t[0],i=t[1],o=r.useState(!1),s=(0,j.Z)(o,2),a=s[0],l=s[1];return{mouseOver:a,isCellExpanded:n,handleToggleExpanded:function(){return i(!n)},handleMouseEnter:function(){l(!0)},handleMouseLeave:function(){l(!1)}}}(),s=o.isCellExpanded,a=o.handleMouseEnter,l=o.handleMouseLeave,c=o.handleToggleExpanded,d=o.mouseOver,p=function(e){var t,n,r,i,o=e.column,s=e.value,a=(0,m.C)(W.L5),l=(0,m.C)(F.C3),c=(0,m.C)(T.FG);if(o.id===Ce.Ux)return{label:(s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", "):void 0)||(null!==(t=null===(n=a.get(s))||void 0===n?void 0:n.name)&&void 0!==t?t:s),expanded:s};if(o.id===Ce.vy)return{label:s,expanded:null!==(r=null===(i=l.get(s))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:s};if(o.id===Ce.OL){var u,d,p=s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=c.get(e))||void 0===n?void 0:n.fides_key)&&void 0!==t?t:e})).join(", "):void 0;return{label:s,expanded:p||(null!==(u=null===(d=c.get(s))||void 0===d?void 0:d.fides_key)&&void 0!==u?u:s)}}return{label:s}}({column:t,value:n});return(0,u.jsx)(i.xu,{position:"relative",onMouseEnter:a,onMouseLeave:l,height:"100%",children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,u.jsxs)(i.xu,{overflow:"hidden",flex:1,p:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!s,children:p.label}),s&&p.expanded!==p.label?(0,u.jsx)(i.xu,{fontStyle:"italic",mt:2,children:(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||s)&&p.expanded&&""!==p.expanded?(0,u.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),c()},children:s?(0,u.jsx)(z.O1,{width:"18px",height:"18px",my:"-4px"}):(0,u.jsx)(z.mC,{width:"18px",height:"18px",my:"-4px"})}):null]})})},ke=n(76459),Pe=n(77751);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(e){var t,n,r,o=e.option,s=e.columnId,a=e.filterValue,l=e.toggleFilterOption,c=(0,m.C)(W.L5),d=s===Ce.Ux&&null!==(t=null===(n=c.get(o))||void 0===n?void 0:n.name)&&void 0!==t?t:o;return(0,u.jsx)(Pe.XZ,{value:o,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[o])&&void 0!==r&&r,onChange:function(e){var t=e.target;l(o,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},o)};function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie={minWidth:30,width:150,maxWidth:300,Cell:Se,Filter:function(e){var t=e.column,n=function(e){var t,n=(0,r.useContext)(ke.Z).tableInstance,i=r.useMemo((function(){var t=new Set;return e.preFilteredRows.forEach((function(n){t.add(n.values[e.id])})),Array.from(t)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(t){e[t]=!1})),e}),[i]);return{filterValue:null!==(t=e.filterValue)&&void 0!==t?t:o,clearFilterOptions:function(){var t={};i.forEach((function(e){t[e]=!1})),e.setFilter(t)},toggleFilterOption:function(t,r){var i,s=Ee(Ee({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,g.Z)({},t,r));Object.values(s).every((function(e){return!e}))?null===n||void 0===n||n.setAllFilters(null===n||void 0===n?void 0:n.state.filters.filter((function(t){return t.id!==e.id}))):e.setFilter(s)},options:i,header:e.Header}}(t),o=n.filterValue,s=n.toggleFilterOption,a=n.options,l=(0,r.useState)(!1),c=l[0],d=l[1],p=c?a:a.slice(0,15),f=a.length>15;return(0,u.jsx)(Q.UQ,{width:"100%",allowToggle:!0,children:(0,u.jsxs)(Q.Qd,{border:"0px",children:[(0,u.jsx)(i.X6,{height:"56px",children:(0,u.jsxs)(Q.KF,{height:"100%",children:[(0,u.jsx)(i.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.Header}),(0,u.jsx)(Q.XE,{})]})}),(0,u.jsxs)(Q.Hk,{children:[(0,u.jsx)(i.MI,{columns:3,children:p.map((function(e){return(0,u.jsx)(Ze,{columnId:t.id,option:e,filterValue:o,toggleFilterOption:s},e)}))}),!c&&f?(0,u.jsx)(S.zx,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,c&&f?(0,u.jsx)(S.zx,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},t.id)},filter:"multifield"},Me={multifield:function(e,t,n){var r=t[0];return e.filter((function(e){var t=e.values[r];return n[t]}))}},Ve=n(30794),Te=n(29470),Fe=n(60245),We=n(11638),Re=n(61561),He=n(85249),Ae=n(60530),Le=n(68972),Be=n(2926),Ge=n(34522),Ue=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useRef)(null),s=(0,r.useContext)(ke.Z).tableInstance;if(!s)return null;var a=function(e,t){if(!e||!e.columns||!e.rows)return"";var n=e.columns,r=e.rows;if("csv"===t)return(0,Le.P)([n].concat((0,N.Z)(r)));var i=Ge.P6.aoa_to_sheet([n].concat((0,N.Z)(r))),o=Ge.P6.book_new();return Ge.P6.book_append_sheet(o,i,"Datamap"),o},l=function(e,t){var n=(new Date).toISOString(),r="report_".concat(n,".").concat(t);if("string"===typeof e){if("csv"===t){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,Be.saveAs)(i,r)}}else(0,Ge.Fv)(e,r)},c=function(){var e=(0,b.Z)(O().mark((function e(t){var r,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(),s){e.next=3;break}return e.abrupt("return");case 3:r={columns:s.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:s.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=a(r,t),l(i,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(Ae.u_,{initialFocusRef:o,isCentered:!0,isOpen:t,onClose:n,size:"lg",children:[(0,u.jsx)(Ae.ZA,{}),(0,u.jsxs)(Ae.hz,{minWidth:"605px",children:[(0,u.jsx)(Ae.xB,{children:(0,u.jsxs)(i.kC,{flexDir:"column",gap:"16px",children:[(0,u.jsx)(i.xv,{children:"Export"}),(0,u.jsx)(i.iz,{color:"gray.200"})]})}),(0,u.jsx)(Ae.ol,{}),(0,u.jsx)(Ae.fe,{pb:"8px",pt:"8px",children:(0,u.jsx)(i.kC,{justifyContent:"center",width:"100%",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,u.jsx)(Ae.mz,{children:(0,u.jsxs)(i.kC,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,u.jsx)(S.zx,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,u.jsx)(S.zx,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},qe=function(e){var t=e.heading,n=e.children;return(0,u.jsxs)(i.xu,{padding:"24px 8px 8px 24px",children:[(0,u.jsx)(i.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})},Xe=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useContext)(ke.Z).tableInstance,s=(0,r.useMemo)((function(){return o||{headerGroups:[]}}),[o]).headerGroups,a=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return e.render("Filter",{key:e.id})}))},l=function(e,t){return e.some((function(e){return t.indexOf(e.id)>-1}))},c=(0,r.useMemo)((function(){return s.length>0?s[0].headers.map((function(e){return e})):[]}),[s]);return(0,u.jsxs)(Ae.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(Ae.ZA,{}),(0,u.jsxs)(Ae.hz,{children:[(0,u.jsx)(Ae.xB,{children:"Filters"}),(0,u.jsx)(Ae.ol,{}),(0,u.jsx)(i.iz,{}),(0,u.jsxs)(Ae.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",children:[l(c,[Ce.vy,Ce.Ux,Ce.OL])?(0,u.jsxs)(qe,{heading:"Privacy attributes",children:[a(c,Ce.vy),a(c,Ce.Ux),a(c,Ce.OL)]}):null,l(c,[Ce.eK])?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.iz,{}),(0,u.jsx)(qe,{heading:"Responsibility",children:a(c,Ce.eK)})]}):null]}),(0,u.jsx)(Ae.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(S.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){null===o||void 0===o||o.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,u.jsx)(S.zx,{colorScheme:"primary",size:"sm",onClick:n,flexGrow:1,children:"Done"})]})})]})]})},Ke=n(92975),Ne=n(62709),Ye=n(20294),Qe=n(65201),$e=n(36737),Je=n(22348);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tt=function(e){var t=e.id,n=e.index,o=e.isVisible,s=e.moveColumn,a=e.setColumnVisible,l=e.text,c=function(e){var t=e.id,n=e.index,i=e.moveColumn,o=e.setColumnVisible,s=(0,r.useRef)(null),a=(0,$e.L)({accept:Ce._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){var o=e.index,a=n;if(o!==a){var l=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(l.bottom-l.top)/2,u=t.getClientOffset().y-l.top;o<a&&u<c||o>a&&u>c||(i(o,a),Object.assign(e,{index:a}))}}}}),l=(0,j.Z)(a,2),c=l[0].handlerId,u=l[1],d=(0,Je.c)({type:Ce._Q.DraggableColumnListItem,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,j.Z)(d,3),f=p[0].isDragging,h=p[1],x=p[2];return h(u(s)),{isDragging:f,ref:s,handlerId:c,preview:x,handleColumnVisibleToggle:function(e){o(n,e.target.checked)}}}({index:n,id:t,moveColumn:s,setColumnVisible:a}),d=c.ref,p=c.isDragging,f=c.handlerId,h=c.preview,x=c.handleColumnVisibleToggle;return(0,u.jsxs)(i.HC,{alignItems:"center",display:"flex",minWidth:0,ref:h,"data-handler-id":f,opacity:p?.2:1,children:[(0,u.jsx)(i.xu,{ref:d,cursor:p?"grabbing":"grab",children:(0,u.jsx)(i.DE,{as:z.zG,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,u.jsxs)(Ke.NI,{alignItems:"center",display:"flex",minWidth:0,title:l,children:[(0,u.jsx)(Ke.lX,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(t),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:l}),(0,u.jsx)(Ne.r,{colorScheme:"complimentary",id:"".concat(t),mr:2,isChecked:o,onChange:x})]})]})},nt=function(e){var t=e.columns,n=(0,r.useState)(null!==t&&void 0!==t?t:[]),i=n[0],o=n[1];return(0,r.useEffect)((function(){o((null===t||void 0===t?void 0:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))||[])}),[t]),{columns:i,moveColumn:(0,r.useCallback)((function(e,t){o((function(n){return(0,Qe.ZP)(n,(function(n){var r=n[e];n.splice(e,1),n.splice(t,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,t){o((function(n){return(0,Qe.ZP)(n,(function(n){n[e]&&(n[e].isVisible=t)}))}))}),[])}},rt=function(e){var t=e.isOpen,n=e.onClose,o=(0,Fe.I0)(),s=(0,m.C)(Re.eo),a=nt({columns:s}),l=(0,r.useCallback)((function(){o((0,Re.Bx)(a.columns)),n()}),[n,o,a.columns]);return(0,u.jsxs)(Ae.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(Ae.ZA,{}),(0,u.jsxs)(Ae.hz,{children:[(0,u.jsx)(Ae.xB,{pb:0,children:"Data Map Settings"}),(0,u.jsx)(Ae.ol,{}),(0,u.jsxs)(Ae.fe,{children:[(0,u.jsx)(i.xv,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,u.jsxs)(Ye.mQ,{colorScheme:"complimentary",children:[(0,u.jsx)(Ye.td,{children:(0,u.jsx)(Ye.OK,{color:"complimentary.500",children:"Columns"})}),(0,u.jsx)(Ye.nP,{children:(0,u.jsx)(Ye.x4,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,u.jsx)(i.aV,{spacing:4,children:a.columns.filter((function(e){return e.value!==Ce.Br})).map((function(e,t){return(0,u.jsx)(tt,{id:e.id,index:t+1,isVisible:e.isVisible,moveColumn:a.moveColumn,setColumnVisible:a.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,u.jsx)(Ae.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(S.zx,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Cancel"}),(0,u.jsx)(S.zx,{colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Save"})]})})]})]})},it=function(){var e=(0,Fe.I0)(),t=function(){var e=(0,m.C)(Re.hd),t=(0,Z.qY)(),n=t.isOpen,r=t.onOpen,i=t.onClose,o=(0,Z.qY)(),s=o.isOpen,a=o.onOpen,l=o.onClose,c=(0,Z.qY)();return{isExportModalOpen:n,isMapOpen:e,isSettingsModalOpen:s,isFilterModalOpen:c.isOpen,onSettingsModalOpen:a,onSettingsModalClose:l,onFilterModalOpen:c.onOpen,onFilterModalClose:c.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),n=t.isExportModalOpen,o=t.isFilterModalOpen,s=t.isSettingsModalOpen,a=t.onSettingsModalOpen,l=t.onSettingsModalClose,c=t.onFilterModalOpen,d=t.onFilterModalClose,p=t.onExportClick,f=t.onExportModalClose,h=t.isMapOpen,x=(0,r.useContext)(ke.Z).tableInstance;if(!x)return null;var g=null===x||void 0===x?void 0:x.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.kC,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,u.jsx)(i.kC,{flexGrow:1,children:(0,u.jsx)(He.Z,{globalFilter:x.state.globalFilter,setGlobalFilter:x.setGlobalFilter})}),(0,u.jsxs)(i.kC,{children:[(0,u.jsxs)(S.zx,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:c,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,u.jsx)(z.r1,{}),children:["Filter",g>0?(0,u.jsx)(Ve.Vp,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:g}):null]}),(0,u.jsxs)(S.hE,{isAttached:!0,size:"sm",marginRight:4,children:[(0,u.jsx)(S.zx,{colorScheme:h?"primary":void 0,onClick:function(){e((0,Re.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,u.jsx)(S.zx,{colorScheme:h?void 0:"primary",onClick:function(){e((0,Re.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,u.jsx)(S.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:a,icon:(0,u.jsx)(We.A5,{})}),(0,u.jsx)(Te.v2,{children:(0,u.jsx)(Te.j2,{as:S.hU,"aria-label":"Export data",icon:(0,u.jsx)(We.nM,{}),onClick:p,size:"sm",variant:"ghost"})})]})]}),(0,u.jsx)(Xe,{isOpen:o,onClose:d}),(0,u.jsx)(Ue,{isOpen:n,onClose:f}),(0,u.jsx)(rt,{isOpen:s,onClose:l})]})},ot=n(40240),st=["key"],at=["key"];function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=function(){return(0,u.jsx)(ot.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})},dt=function(e){var t=e.headerGroups;return(0,u.jsx)(ot.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:Ce.pE,children:t.map((function(e){var t=e.getHeaderGroupProps(),n=t.key,r=(0,v.Z)(t,st);return(0,u.jsxs)(ot.Tr,ct(ct({},r),{},{height:"inherit",children:[(0,u.jsx)(ut,{}),e.headers.map((function(e,t){var n=e.getHeaderProps(),r=n.key,o=(0,v.Z)(n,at);return(0,u.jsxs)(ot.Th,ct(ct({},o),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===t?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,u.jsx)(i.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,u.jsx)(i.xu,ct(ct({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,u.jsx)(ut,{})]}),n)}))})},pt=["key"],ft=["key"];function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=function(e){var t=e.setSelectedSystemId,n=(0,r.useContext)(ke.Z).tableInstance;if(!n)return null;var o=n.getTableProps,s=n.getTableBodyProps,a=n.headerGroups,l=n.prepareRow,c=n.rows;return(0,u.jsx)(i.xu,{boxSize:"100%",overflow:"auto",children:(0,u.jsxs)(ot.iA,xt(xt({},o()),{},{size:"sm","data-testid":"datamap-table",children:[(0,u.jsx)(dt,{headerGroups:a}),(0,u.jsx)(ot.p3,xt(xt({backgroundColor:Ce.pE},s()),{},{children:c.map((function(e){return l(e),[(0,r.createElement)(ot.Tr,xt(xt({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",height:"70px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal}),(0,u.jsxs)(ot.Td,xt(xt({colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:"System Name"}),(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",children:e.groupByVal})]}))),e.subRows.map((function(n,r){l(n);var i=n.getRowProps(),o=i.key,s=(0,v.Z)(i,pt);return(0,u.jsx)(ot.Tr,xt(xt({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:r===e.subRows.length-1?"6px":"",borderBottomRightRadius:r===e.subRows.length-1?"6px":""},s),{},{_hover:{bg:"gray.50"},cursor:"pointer",backgroundColor:"white",onClick:function(){n.values[Ce.sD]&&t(n.values[Ce.sD])},ml:4,mr:4,_last:{mb:4},children:n.cells.map((function(e,t){var r=e.getCellProps(),i=r.key,o=(0,v.Z)(r,ft);return(0,u.jsx)(ot.Td,xt(xt({},o),{},{borderRightWidth:t===n.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,children:e.render("Cell")}),i)}))}),o)}))]}))}))]}))})},gt=n(60709),bt=function(){return(0,u.jsx)(i.M5,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,u.jsx)(i.xu,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xv,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,u.jsx)(i.xv,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,u.jsx)(i.xv,{children:"Let's get started!"}),(0,u.jsx)(i.xu,{children:(0,u.jsx)(S.zx,{as:"a",href:gt.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},jt=x()((function(){return Promise.all([n.e(4804),n.e(7670),n.e(6412)]).then(n.bind(n,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),vt=function(){var e=function(){var e=(0,m.C)(Re.hd),t=(0,m.C)(Re.Xt),n=(0,r.useContext)(ye.Y),i=(0,p.oI)().attemptAction,o=(0,r.useState)(),s=o[0],a=o[1],l=(0,r.useCallback)((function(e){i().then((function(t){t&&a(e)}))}),[i,a]),c=(0,r.useCallback)((function(){i().then((function(e){var t;e&&s&&(n.current&&(null===(t=n.current)||void 0===t||t.$id(s).unselect()),a(void 0))}))}),[i,n,s]);return{isMapOpen:e,isGettingStarted:t,selectedSystemId:s,setSelectedSystemId:l,resetSelectedSystemId:c}}(),t=e.isMapOpen,n=e.isGettingStarted,o=e.setSelectedSystemId,s=e.selectedSystemId,a=e.resetSelectedSystemId,l=function(){var e=(0,m.T)(),t=(0,r.useContext)(ke.Z).updateTableInstance,n=(0,m.C)(we.eo),i=(0,we.Ex)({organizationName:"default_organization"}),o=i.data,s=i.isLoading;(0,W.MO)(),(0,F.fd)(),(0,T.te)();var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var t=o.columns,n=o.rows;e((0,we.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,we.ym)(!0)):e((0,we.ym)(!1)))}}),[o,e]);var l=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),c=(0,r.useMemo)((function(){return(n||[]).map((function(e){var t=e.text,n=e.value,r=e.isVisible;return{id:n,accessor:function(e){return e[n]},Header:t,isVisible:r,aggregate:function(e,t){var n=new Set(t);return e.forEach((function(e){n.has(e)||n.add(e)})),Array.from(n.values()).join(", ")}}}))}),[n]),u=(0,Oe.useTable)({columns:c,data:l,defaultColumn:Ie,filterTypes:Me,initialState:{groupBy:[Ce.Br,Ce.vy]}},Oe.useFilters,Oe.useGlobalFilter,Oe.useFlexLayout,Oe.useResizeColumns,Oe.useGroupBy,Oe.useExpanded);return(0,r.useEffect)((function(){return t(u)}),[u,t]),(0,r.useEffect)((function(){u.setHiddenColumns((null===n||void 0===n?void 0:n.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[n,u]),_e(_e({},u),{},{isLoading:s})}();return l.isLoading?(0,u.jsx)(i.M5,{width:"100%",flex:"1",children:(0,u.jsx)(f.$,{})}):n?(0,u.jsx)(bt,{}):(0,u.jsxs)(i.kC,{direction:"column",height:"100%",children:[(0,u.jsx)(i.xu,{marginBottom:3,marginRight:10,children:(0,u.jsx)(it,{})}),(0,u.jsxs)(i.kC,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[t?(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(jt,{setSelectedSystemId:o})}):null,t?null:(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(mt,{setSelectedSystemId:o})}),(0,u.jsx)(ve,{selectedSystemId:s,resetSelectedSystemId:a})]})]})},yt=function(){var e=(0,r.useMemo)((function(){return new ke.m}),[]);return(0,u.jsx)(d,{title:"View Map",children:(0,u.jsx)(ke.Z.Provider,{value:e,children:(0,u.jsxs)(ye.Z,{children:[(0,u.jsx)(vt,{}),(0,u.jsx)(p.eB,{})]})})})}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(24502)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,2141,5527,8301,8194,6733,9,9348,9774,2888,179],(function(){return t=53910,e(e.s=t);var t}));var t=e.O();_N_E=t}]);