"use strict";(self.webpackChunk_aws_amazon_codeguru_extension=self.webpackChunk_aws_amazon_codeguru_extension||[]).push([[606],{6460:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var o=n(1285),r=n(4896),s=n(3033),i=n(4038),a=n(4933),c=n(2583),u=n(2382),l=n(1480),d=n(131),h=n(2502),m=n(6271),p=n.n(m),g=n(3654);const C=new h.LabIcon({name:"codeGuruIcon",svgstr:'<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M9.96047 14.861H6.11001C5.93183 14.861 5.84259 15.0765 5.96859 15.2025L6.7018 15.9357C6.73931 15.9732 6.79018 15.9943 6.84322 15.9943H9.22726C9.2803 15.9943 9.33118 15.9732 9.36868 15.9357L10.1019 15.2025C10.2279 15.0765 10.1387 14.861 9.96047 14.861Z" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<path d="M5.82716 13.8223H10.2433C10.3538 13.8223 10.4433 13.7327 10.4433 13.6223V11.5728C10.4433 11.5036 10.4789 11.44 10.5361 11.401C11.2203 10.9334 12.4264 9.65462 12.4264 7.77847C12.4264 5.32318 10.4433 3.34006 8.08246 3.34006C5.7216 3.34006 3.64404 4.85101 3.64404 7.77847C3.64404 9.97931 4.81158 11.0738 5.50089 11.4067C5.57562 11.4428 5.62716 11.5163 5.62716 11.5992V13.6223C5.62716 13.7327 5.71671 13.8223 5.82716 13.8223Z" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<line x1="13.4653" y1="7.52457" x2="15.1652" y2="7.52457" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<line x1="12.0634" y1="3.68832" x2="13.0077" y2="2.55511" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<line y1="-0.35" x2="1.69982" y2="-0.35" transform="matrix(-1 0 0 1 2.69971 7.87457)" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<line y1="-0.35" x2="1.47511" y2="-0.35" transform="matrix(-0.640184 -0.768221 -0.768221 0.640184 3.83301 3.91238)" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<line x1="8.33828" y1="0.507812" x2="8.33828" y2="2.20763" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<path d="M8.17505 5.035L7.60844 10.5122" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<path d="M6.47721 6.73727L5.34399 7.87049L6.47721 9.0037" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n<path d="M9.68783 6.73727L10.821 7.87049L9.68783 9.0037" stroke="var(--jp-ui-font-color0)" stroke-width="0.7"/>\n</svg>\n'}),S='\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "AmazonCodeGuruSecurityScanAccess",\n      "Effect": "Allow",\n      "Action": [\n        "codeguru-security:CreateScan",\n        "codeguru-security:CreateUploadUrl",\n        "codeguru-security:GetScan",\n        "codeguru-security:GetFindings"\n      ],\n      "Resource": "arn:aws:codeguru-security:*:*:scans/*"\n    }\n  ]\n}\n';class y extends s.ReactWidget{render(){const e=[{header:"Step 1: Provide necessary permissions",description:`Go to the [AWS IAM Console](https://us-east-1.console.aws.amazon.com/iamv2/home#/home) to update the permissions policy for each role or user that will use this extension. Use an AWS managed policy or create a policy with the following permissions:\n\n\`\`\`\n${S}\n\`\`\`\n`},{header:"Step 2: Configure credentials",headerDescription:"This step is only required for JupyterLab users. SageMaker Studio users can skip this step.",description:"Refresh your AWS credentials using the AWS CLI. Run the following command to update your AWS configuration:\n\n```\naws configure\n```\n"}];return p().createElement(l.Z,{padding:"xxl",className:"about-codeguru "+("true"===document.body.getAttribute("data-jp-theme-light")?"":"awsui-dark-mode")},p().createElement(u.SpaceBetween,{direction:"vertical",size:"m"},p().createElement(l.Z,{variant:"h1"},"Amazon CodeGuru extension"),p().createElement(u.ColumnLayout,{borders:"horizontal",columns:1},p().createElement(l.Z,null,p().createElement(l.Z,{variant:"h2"},"About"),p().createElement(l.Z,{variant:"p"},p().createElement(E,{content:'This extension scans code, detects security vulnerabilities, and\n                  recommends code quality improvements, helping you to create and\n                  deploy secure, high quality ML models. With this new feature,\n                  you can quickly identify vulnerable lines of code and\n                  inefficient machine learning methods within a notebook. In\n                  addition, you will get recommendations that clearly show how to\n                  fix the identified vulnerabilities and improve the ML methods.\n                  [Learn more]("https://docs.aws.amazon.com/codeguru/latest/security-ug/")'}))),p().createElement(l.Z,null,p().createElement(l.Z,{variant:"h2"},"Complete CodeGuru extension installation"),p().createElement(l.Z,{variant:"p"},"Once you install this extension, you must complete these steps to begin scanning your code."),p().createElement(u.Grid,{gridDefinition:[{colspan:6},{colspan:6}]},e.map((e=>p().createElement(u.Container,{header:p().createElement(u.Header,{variant:"h2",description:e.headerDescription},e.header),fitHeight:!0},p().createElement(E,{content:e.description})))))),p().createElement(l.Z,{variant:"h2"},"Using the extension"),p().createElement(l.Z,null,"After you install the extension, you can begin using the code scanning feature. You can run a scan by choosing any code cell in your file and then choosing the CodeGuru icon"," ",p().createElement(C.react,{className:"cg-icon-inline"})," in the top task bar. Once a scan is complete, you see findings underlined in your code. To view details about the findings, you can open the context (right-click) menu for any cell and choose Show diagnostics panel. You can also hold your cursor over the underlined code to see a popover with a summary. For more information on using the extension, see"," ",p().createElement(d.Z,{href:"#",external:!0},"Getting started with the Amazon CodeGuru extension"),"."),p().createElement(l.Z,null,p().createElement(E,{content:'\n## Pricing\n\nThe cost of the CodeGuru extension is determined by the frequency of scans in your notebook file. By default, scans run every 120 seconds. To understand how this impacts billing, visit our [pricing policy]("https://docs.aws.amazon.com/codeguru/latest/security-ug/jupyter-sagemaker-extension"). You can change the frequency of scans in the Advanced Settings Editor.\n              '})))))}}function E({content:e}){return p().createElement(g.D,{components:{a:({children:e,href:t})=>p().createElement(d.Z,{external:!0,href:t},e),code:({children:e})=>p().createElement("pre",null,p().createElement("div",{className:"jp-InputArea-editor cg-code-editor"},p().createElement("code",null,e)),p().createElement("div",null,p().createElement(h.Button,{className:"cg-button",onClick:()=>{return t=e,navigator.clipboard.writeText(t);var t}},"Copy")))}},e)}var f=n(5923),w=n(1840);const v="@aws/amazon-codeguru-extension";var I;!function(e){e.CREATE_CODE_SCAN="@aws/amazon-codeguru-extension:create_scan_command",e.SCAN_STATUS="@aws/amazon-codeguru-extension:scan_status"}(I||(I={}));const k="run-codeguru-scan",x="Run CodeGuru scan";class A{constructor(e){this._stateChanged=new w.Signal(this),this.app=e,this.handleClick=this.handleClick.bind(this)}emitStatusChange(e){this._stateChanged.emit(e)}handleClick(){this.app.commands.execute(`lsp:${k}-notebook`)}createNew(e){const t=new s.ToolbarButton({icon:C,onClick:this.handleClick,tooltip:x});return e.toolbar.insertItem(10,x,t),new f.DisposableDelegate((()=>{t.dispose()}))}get stateChanged(){return this._stateChanged}}var b,_=n(9751);!function(e){e.INSUFFICIENT_ACCESS_PERMISSIONS="INSUFFICIENT_ACCESS_PERMISSIONS",e.MISSING_AWS_CREDENTIALS="MISSING_AWS_CREDENTIALS"}(b||(b={}));const N=({errorType:e})=>{const t=`\n ### Missing permissions for CodeGuru extension\n\n\n You do not have the necessary permissions to run a CodeGuru scan. [Learn more](#)\n\nGo to the [AWS IAM Console](https://us-east-1.console.aws.amazon.com/iamv2/home#/home) to update the permissions policy for each user that will use this extension.\n\nUse an AWS managed policy or create a policy with the following permissions:\n\n \`\`\`\n${S}\n \`\`\`\n   `;return p().createElement("div",{className:"cg-popover"},p().createElement("div",{className:"cg-popover-content cg-text"},p().createElement(E,{content:e===b.INSUFFICIENT_ACCESS_PERMISSIONS?t:"\n ### Missing AWS credentials for CodeGuru extension\n\n\n To use Amazon CodeGuru scan, provide AWS credentials by pasting\n\n the following script in your command prompt window.\n\n ```\n aws configure\n ```\n   "})))};class T extends s.ReactWidget{constructor(e){super(),this.addClass("jp-ReactWidget"),this.errorType=e.errorType}render(){return p().createElement(N,{errorType:this.errorType})}}const G={completed:5e3,error:3e4,idle:0};function M(e){const[t,n]=(0,m.useState)(e.status),[o,r]=(0,m.useState)();switch(e.listener.connect(((e,{status:t,message:o})=>{"pending"!==t&&setTimeout((()=>{n("idle")}),G[t]),n(t),r(o)})),t){case"pending":{const e="CodeGuru: Scan in progress";return p().createElement(_.Z,{type:"in-progress",colorOverride:"blue"},p().createElement(c.TextItem,{source:e}))}case"error":{const t=function(e){if(e)return e.includes("AccessDeniedException")&&e.includes("not authorized to perform: codeguru-security")?b.INSUFFICIENT_ACCESS_PERMISSIONS:(e.includes("UnrecognizedClientException")||e.includes("ExpiredTokenException"))&&e.includes("The security token included in the request is ")?b.MISSING_AWS_CREDENTIALS:void 0}(String(o)),n=t===b.INSUFFICIENT_ACCESS_PERMISSIONS?"CodeGuru: Missing permissions":t===b.MISSING_AWS_CREDENTIALS?"CodeGuru: Missing credentials":"CodeGuru: Scan failed";return p().createElement("div",{onClick:()=>e.handleClick(t)},p().createElement(_.Z,{type:"warning"},p().createElement(c.TextItem,{source:n})))}case"completed":{const e="CodeGuru: Scan completed";return p().createElement(_.Z,{type:"success",colorOverride:"blue"},p().createElement(c.TextItem,{source:e}))}default:return p().createElement(p().Fragment,null)}}class R extends s.ReactWidget{constructor(e){super(),this._popup=null,this.status=e.status,this.listener=e.listener,this.handleClick=this.handleClick.bind(this)}handleClick(e){var t;e&&((null===(t=this._popup)||void 0===t?void 0:t.isVisible)?this._popup.close():(this._popup&&this._popup.dispose(),this._popup=(0,c.showPopup)({body:new T({errorType:e}),anchor:this,align:"left"})))}render(){return p().createElement(M,{status:this.status,listener:this.listener,handleClick:this.handleClick})}}var D;!function(e){e.ARN="eu-north-1",e.SYD="ap-southeast-2",e.IAD="us-east-1",e.CMH="us-east-2",e.PDX="us-west-2",e.NRT="ap-northeast-1",e.SIN="ap-southeast-1",e.FRA="eu-central-1",e.DUB="eu-west-1",e.LHR="eu-west-2"}(D||(D={}));const L=D.IAD;class W extends r.p{}let F=L;const Z=e=>[{id:k,label:x,icon:C,execute:({connection:t,document:n})=>{let o;if(null==t?void 0:t.isConnected){const r=t.connection;r.sendRequest("workspace/executeCommand",{command:"cgs.runScan",arguments:[n.document_info.uri,F]}),r.onNotification("$/progress",(t=>{"command: runScan"===t.value.title&&(o=t.token),o===t.token&&"report"===t.value.kind&&t.value.message&&e.emitStatusChange(t.value.message)}))}},is_enabled:()=>!0,rank:4}],z={id:`${v}:plugin`,autoStart:!0,requires:[o.ILSPFeatureManager,c.IStatusBar,i.ISettingRegistry,a.IStateDB],activate:(e,t,n,o,r)=>{const i=new A(e),a=new R({status:"idle",listener:i.stateChanged});e.docRegistry.addWidgetExtension("Notebook",i),t.register({feature:{editorIntegrationFactory:new Map([["CodeMirrorEditor",W]]),id:I.CREATE_CODE_SCAN,name:"CodeGuru Security",commands:Z(i)}}),n.registerStatusItem(I.SCAN_STATUS,{align:"middle",item:a,rank:20});let c,u=240,l="Disabled";function d(t){u=t.get("scanFrequency").composite,l=t.get("autoScan").composite,F=t.get("region").composite,c&&clearInterval(c),"Enabled"===l&&u>0&&(c=setInterval((()=>{e.commands.execute(`lsp:${k}-notebook`)}),1e3*u))}Promise.all([e.restored,o.load(`${v}:plugin`)]).then((([,e])=>{d(e),e.changed.connect(d)})).catch((e=>{console.error(`Error while reading the settings.\n${e}`)}));const h=()=>{const e=new y,t=new s.MainAreaWidget({content:e});return t.id="about-codeguru",t.title.label="Get started with CodeGuru",t.title.icon=C,t.title.closable=!0,t};let m=h();e.commands.addCommand(`${v}:about-codeguru`,{label:"About CodeGuru",execute:()=>{m.isDisposed&&(m=h()),m.isAttached||e.shell.add(m,"main"),e.shell.activateById(m.id)}}),e.restored.then((()=>r.fetch(`${v}:plugin`))).then((t=>{let n=!0;try{n=t.isFirstTime}catch(e){}return n&&e.commands.execute(`${v}:about-codeguru`),r.save(`${v}:plugin`,{isFirstTime:!1})}))}}}}]);