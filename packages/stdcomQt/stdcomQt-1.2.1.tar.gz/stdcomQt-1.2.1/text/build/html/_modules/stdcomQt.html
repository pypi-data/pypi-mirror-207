
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>stdcomQt &#8212; stdcomQt 1.1.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for stdcomQt</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QMutex</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">,</span> <span class="n">QTimer</span><span class="p">,</span> <span class="n">QEvent</span><span class="p">,</span> <span class="n">pyqtSlot</span><span class="p">,</span> <span class="n">pyqtSignal</span><span class="p">,</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">QCoreApplication</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtNetwork</span> <span class="kn">import</span> <span class="n">QTcpSocket</span><span class="p">,</span> <span class="n">QAbstractSocket</span>
<span class="kn">import</span> <span class="nn">csv</span>


<span class="n">stdcomQtVersion</span> <span class="o">=</span> <span class="s2">&quot;1.1.4&quot;</span>
<div class="viewcode-block" id="SubObject"><a class="viewcode-back" href="../code.html#stdcomQt.SubObject">[docs]</a><span class="k">class</span> <span class="nc">SubObject</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Internal use, not for users</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sigNewData</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">sigNewDesc</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

    <span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">connectedSubs</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">proxLock</span> <span class="o">=</span> <span class="n">QMutex</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">Parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">Parent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">AddData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FireConnect</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">GetData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">GetDesc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">desc</span>

    <span class="k">def</span> <span class="nf">GetName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">AddDesc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desc</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigNewDesc</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">FireConnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigNewData</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigNewDesc</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">SetOwner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isOwner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">owner</span>

    <span class="k">def</span> <span class="nf">AddSub</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">subs</span>

    <span class="k">def</span> <span class="nf">DelSub</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span>  <span class="o">-</span> <span class="mi">1</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">subs</span>

    <span class="k">def</span> <span class="nf">GetNumberSubs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connectedSubs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">subs</span>

    <span class="k">def</span> <span class="nf">SetActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">active</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isActive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">active</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">active</span></div>


<div class="viewcode-block" id="stecQSocket"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket">[docs]</a><span class="k">class</span> <span class="nc">stecQSocket</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Qt Style cBridge to  Multiverse just like c++ code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sigNewNames</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">sigDown</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="n">signUp</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="n">servicePort</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">host</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">xm</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Parent</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">namesLock</span> <span class="o">=</span> <span class="n">QMutex</span><span class="p">()</span>
    <span class="n">connectedLock</span> <span class="o">=</span> <span class="n">QMutex</span><span class="p">()</span>
    <span class="n">names</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4897</span><span class="p">,</span> <span class="n">Parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param host: Host IP address default localhost</span>
<span class="sd">        :param port: Service Port, default 4897</span>
<span class="sd">        :param Parent: Qt QObject parent or None default</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">Parent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Parent</span> <span class="o">=</span> <span class="n">Parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">servicePort</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span> <span class="o">=</span> <span class="n">QTcpSocket</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">connected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SlotConnected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">disconnected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SlotDisconnected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">readyRead</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SlotDataReady</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SlotSocketError</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SlotTimerout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SlotTimerout</span><span class="p">()</span>

<div class="viewcode-block" id="stecQSocket.quit"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.quit">[docs]</a>    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        call before deletelater by user</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></div>

<div class="viewcode-block" id="stecQSocket.InsertProxy"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.InsertProxy">[docs]</a>    <span class="k">def</span> <span class="nf">InsertProxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal use, not for user</span>
<span class="sd">        :param name: name of the subscription</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">name</span><span class="p">:</span> <span class="n">SubObject</span><span class="p">(</span><span class="n">name</span><span class="p">)})</span>

        <span class="n">xproxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">xproxy</span></div>

    <span class="k">def</span> <span class="nf">getNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">keys</span>

<div class="viewcode-block" id="stecQSocket.setOwner"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.setOwner">[docs]</a>    <span class="k">def</span> <span class="nf">setOwner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Make this MalcolmProof Please&quot;</span><span class="p">,</span> <span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets us as the owner of the subscription, we will automatically refeed multiverse if reset</span>
<span class="sd">        :param name: subscription name</span>
<span class="sd">        :param flag:  True means we are golden copy, false restores to non-golden copy</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InsertProxy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">proxy</span><span class="o">.</span><span class="n">SetOwner</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span></div>

<div class="viewcode-block" id="stecQSocket.isConnected"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.isConnected">[docs]</a>    <span class="k">def</span> <span class="nf">isConnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns true if connected to multiverse</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">connected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">connected</span></div>

<div class="viewcode-block" id="stecQSocket.Host"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.Host">[docs]</a>    <span class="k">def</span> <span class="nf">Host</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: current Host</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span></div>
<div class="viewcode-block" id="stecQSocket.Port"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.Port">[docs]</a>    <span class="k">def</span> <span class="nf">Port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return:  current service Port</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">servicePort</span></div>
<div class="viewcode-block" id="stecQSocket.ProcessCommand"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.ProcessCommand">[docs]</a>    <span class="k">def</span> <span class="nf">ProcessCommand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use, decodes messages</span>
<span class="sd">        :param row:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;NAMESUP&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="n">xp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InsertProxy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sigNewNames</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="s1">&#39;READDATA&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)):</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
                    <span class="n">xp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InsertProxy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">xp</span><span class="o">.</span><span class="n">AddData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="s1">&#39;UPDATE-DESC&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

            <span class="n">xp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">InsertProxy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">xp</span><span class="o">.</span><span class="n">AddDesc</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span></div>

<div class="viewcode-block" id="stecQSocket.SlotSocketError"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotSocketError">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">SlotSocketError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use</span>
<span class="sd">        called when connection to multiverse fails</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">isOpen</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span></div>

<div class="viewcode-block" id="stecQSocket.SlotConnected"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotConnected">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">SlotConnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        interal use</span>
<span class="sd">        Will restart any Subscription previously made</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>

        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;NAMES</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">isActive</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;NOTIFY,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">isOwner</span><span class="p">():</span>
                <span class="n">what</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetData</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">what</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
                            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEI,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">):</span>
                            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEF,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">bool</span><span class="p">):</span>
                            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEB,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATE,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

                        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">what</span><span class="p">:</span>
                            <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                        <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

                <span class="n">what</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetDesc</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">what</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATE-DESC,&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="n">what</span>
                    <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">namesLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span></div>

<div class="viewcode-block" id="stecQSocket.SlotDisconnected"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotDisconnected">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">SlotDisconnected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectedLock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span></div>

<div class="viewcode-block" id="stecQSocket.SlotWrite"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotWrite">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">SlotWrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use</span>
<span class="sd">        :param command:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span></div>

<div class="viewcode-block" id="stecQSocket.SlotDataReady"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotDataReady">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">SlotDataReady</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal use</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">canReadLine</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">readLine</span><span class="p">()</span>
            <span class="n">jv</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">jv</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">each</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ProcessCommand</span><span class="p">((</span><span class="n">each</span><span class="p">))</span></div>

<div class="viewcode-block" id="stecQSocket.SlotTimerout"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotTimerout">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">SlotTimerout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if self.xm.state() == QAbstractSocket.UnconnectedState:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;State: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">state</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">connectToHost</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">servicePort</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;PING</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">(</span><span class="n">command</span><span class="p">)</span></div>

<div class="viewcode-block" id="stecQSocket.SlotNewHost"><a class="viewcode-back" href="../code.html#stdcomQt.stecQSocket.SlotNewHost">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">SlotNewHost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        user can change the                                                                                                                                                             connection, by host and port</span>
<span class="sd">        :param host:</span>
<span class="sd">        :param port:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">servicePort</span> <span class="o">=</span> <span class="n">port</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xm</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">SlotTimerout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div></div>


<span class="c1"># ...................................................................................</span>
<div class="viewcode-block" id="Subscriber"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber">[docs]</a><span class="k">class</span> <span class="nc">Subscriber</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    User connects to Multiverse just like c++ code</span>
<span class="sd">    Subscribers are used by any user to connect to a name or create a name on Multiverse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sigUpdateData</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">sigUpdateDesc</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">sigUpdateMultiverse</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cloud</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">userData</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">functionData</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">functionDesc</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cloud</span><span class="p">:</span> <span class="n">stecQSocket</span><span class="p">,</span> <span class="n">DataCallBack</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">DescCallBack</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sunscription</span>
<span class="sd">        :param name: Subscription name</span>
<span class="sd">        :param cloud: Name of the stecQSocket cloud</span>
<span class="sd">        :param DataCallBack: Function a user can recieve data if desired, and if the user does not want to use signals</span>
<span class="sd">        :param DescCallBack: Function a user can recieve descciptions if desired, and if the user does not want to use signals</span>
<span class="sd">        :param Parent: QObject parent or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">Parent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cloud</span> <span class="o">=</span> <span class="n">cloud</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">InsertProxy</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functionData</span> <span class="o">=</span> <span class="n">DataCallBack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functionDesc</span> <span class="o">=</span> <span class="n">DescCallBack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">sigNewDesc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newDesc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">sigNewData</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateMultiverse</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">SlotWrite</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">isActive</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;NOTIFY,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateMultiverse</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">SetActive</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">QTimer</span><span class="o">.</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">StartSingleShot</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">AddSub</span><span class="p">()</span>

<div class="viewcode-block" id="Subscriber.deleteLater"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.deleteLater">[docs]</a>    <span class="k">def</span> <span class="nf">deleteLater</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes later inheritied</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">DelSub</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">subs</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">SetActive</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;REMOVESUB,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateMultiverse</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span></div>


<div class="viewcode-block" id="Subscriber.UserData"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.UserData">[docs]</a>    <span class="k">def</span> <span class="nf">UserData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Users can attach user data here</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">userData</span></div>

<div class="viewcode-block" id="Subscriber.SetUserData"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.SetUserData">[docs]</a>    <span class="k">def</span> <span class="nf">SetUserData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userData</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sets user data locally for user to decide what to do with can be anything</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userData</span> <span class="o">=</span> <span class="n">userData</span></div>


<div class="viewcode-block" id="Subscriber.Data"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.Data">[docs]</a>    <span class="k">def</span> <span class="nf">Data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The data if it exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">GetData</span><span class="p">()</span></div>

<div class="viewcode-block" id="Subscriber.Desc"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.Desc">[docs]</a>    <span class="k">def</span> <span class="nf">Desc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: Description if exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">GetDesc</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Name</span>
<div class="viewcode-block" id="Subscriber.newData"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.newData">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">newData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        intenal use</span>
<span class="sd">        :param name: subscription name</span>
<span class="sd">        :param data: Data</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateData</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">functionData</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">functionData</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subscriber.newDesc"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.newDesc">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">newDesc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        internal use</span>
<span class="sd">        :param desc: new description coming from multiverse</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateDesc</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">functionDesc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">functionDesc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subscriber.UpdateData"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.UpdateData">[docs]</a>    <span class="k">def</span> <span class="nf">UpdateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        User can update multiverse with data</span>
<span class="sd">        :param what: Data to send to Muliverse</span>
<span class="sd">        :param index:  Zero default, but it can be sent in the middle of an arrary</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEI,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEF,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">what</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATEB,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATE,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">what</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateMultiverse</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">isOwner</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">master</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">isConnected</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">AddData</span><span class="p">(</span><span class="n">what</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subscriber.UpdateDesc"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.UpdateDesc">[docs]</a>    <span class="k">def</span> <span class="nf">UpdateDesc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if we are the golden copy, we can send a Malcolm proof descriptor</span>
<span class="sd">        :param what: the descriptor</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;UPDATE-DESC,&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="n">what</span>
        <span class="n">command</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigUpdateMultiverse</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">isOwner</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">master</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">isConnected</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">AddDesc</span><span class="p">(</span><span class="n">what</span><span class="p">)</span></div>

<div class="viewcode-block" id="Subscriber.StartSingleShot"><a class="viewcode-back" href="../code.html#stdcomQt.Subscriber.StartSingleShot">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">StartSingleShot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        interanl use</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Data</span><span class="p">())</span>

        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Desc</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">desc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newDesc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span></div></div>








<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="kn">from</span> <span class="nn">stdcomvsettings</span> <span class="kn">import</span> <span class="n">RetensionSettings</span> <span class="k">as</span> <span class="n">RS</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;stdcomQt&quot;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">sys</span>

    <span class="k">if</span> <span class="s2">&quot;--version&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">stdcomQtVersion</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">QCoreApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">stecQSocket</span><span class="p">()</span>

    <span class="n">h</span> <span class="o">=</span> <span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;hello2&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
    <span class="n">w</span><span class="o">.</span><span class="n">setOwner</span><span class="p">(</span><span class="s2">&quot;hello2&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">h</span><span class="o">.</span><span class="n">UpdateDesc</span><span class="p">(</span><span class="s2">&quot;Testing&quot;</span><span class="p">)</span>
    <span class="n">h</span><span class="o">.</span><span class="n">UpdateData</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

    <span class="n">hh</span> <span class="o">=</span> <span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;hello2&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
    <span class="n">hh</span><span class="o">.</span><span class="n">UpdateData</span><span class="p">([</span><span class="mi">222</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

    <span class="n">residentText</span> <span class="o">=</span> <span class="s2">&quot;hello.ressident&quot;</span>
    <span class="n">residentTest</span> <span class="o">=</span>  <span class="n">Subscriber</span><span class="p">(</span><span class="n">residentText</span> <span class="p">,</span> <span class="n">w</span><span class="p">)</span>

    <span class="n">rsetting</span> <span class="o">=</span> <span class="n">RS</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">rsetting</span><span class="o">.</span><span class="n">GetResidentData</span><span class="p">(</span><span class="n">residentText</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; no resident data check for real data&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">residentTest</span><span class="o">.</span><span class="n">Data</span><span class="p">()</span>

        <span class="sd">&quot;&quot;&quot; No Data has been output yet&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Testing&quot;</span><span class="p">]</span>

        <span class="sd">&quot;&quot;&quot; updata to multiverse &quot;&quot;&quot;</span>
        <span class="n">residentTest</span><span class="o">.</span><span class="n">UpdateData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="sd">&quot;&quot;&quot; Save resident data &quot;&quot;&quot;</span>
        <span class="n">rsetting</span><span class="o">.</span><span class="n">SaveResidentData</span><span class="p">(</span><span class="n">residentText</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">residentTest</span><span class="o">.</span><span class="n">UpdateData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>




    <span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
    <span class="n">w</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">stdcomQt</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code.html">Code Documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Ed Chapman.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>